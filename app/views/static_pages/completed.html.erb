<div class="container py-5">
  <div class="row">
    <div class="col-lg-12">
      <h2>Completed Challenges</h2>
      <p class="mb-5">
        <% if @comments.length != 0 %>
          Here are the list of accomplished missions so far. Browse through them to see what others have been up to during break!
        <% else %>
          No missions accomplished yet. Be the first to post!
        <% end %>
      </p>
      <div>
        <div class="pagination">
          <%= will_paginate @comments, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
        </div>
        <% @comments.each do |comment| %>
          <hr>
          <div class="row">
            <div class="col-md-3 mb-4">
              <span class="font-weight-bold"><%= comment.user.name %></span>
              <span class="badge badge-pill badge-warning"><%= comment.user.campus + " " + (comment.user.staff ? "Staff" : (comment.user.gender ? "Bros" : "Sis")) %></span>
              <div class="text-uppercase text-muted mt-1" style="font-size: 12px;"><%= comment.created_at.in_time_zone(-5).to_time.strftime('%B %e at %l:%M %p') %></div>
            </div>
            <div class="col-md-9">
              <div class="mb-3">
                <span class="font-weight-bold"><%= comment.mission.name %></span>
                <span class="badge badge-secondary ml-1"><%= comment.mission.points %> points</span>
              </div>
              <div class="mb-3">
                <% if comment.content != nil %>
                  <%= comment.content %>
                <% end %>
              </div>
              <div class="mb-3">
                <% if comment.avatar.attached? %>
                  <%=link_to image_tag(comment.avatar.variant(resize: "250x250")), url_for(comment.avatar), :popup=>['original_image', 'height=700,width=900'] %>
                <% end %>
              </div>
              <% if comment.video.attached? %>
                <%=link_to image_tag(comment.video.preview(resize: "100x100")), url_for(comment.video), :popup=>['original_image', 'height=700,width=900'] %>
              <% end %>
            </div>
          </div>
        <% end %>
        <hr>
        <div class="pagination">
          <%= will_paginate @comments, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
        </div>
      </div>
    </div>
  </div>
</div>
